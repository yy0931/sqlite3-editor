var yr=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var st=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)};var lt=(e,t,n)=>(yr(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var nt,T,Tn,Ae,zt,We={},kn=[],gr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function de(e,t){for(var n in t)e[n]=t[n];return e}function Cn(e){var t=e.parentNode;t&&t.removeChild(e)}function xr(e,t,n){var r,i,a,s={};for(a in t)a=="key"?r=t[a]:a=="ref"?i=t[a]:s[a]=t[a];if(arguments.length>2&&(s.children=arguments.length>3?nt.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)s[a]===void 0&&(s[a]=e.defaultProps[a]);return qe(e,s,r,i,null)}function qe(e,t,n,r,i){var a={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i==null?++Tn:i};return i==null&&T.vnode!=null&&T.vnode(a),a}function W(e){return e.children}function Fe(e,t){this.props=e,this.context=t}function pe(e,t){if(t==null)return e.__?pe(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?pe(e):null}function On(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return On(e)}}function Ht(e){(!e.__d&&(e.__d=!0)&&Ae.push(e)&&!Ge.__r++||zt!==T.debounceRendering)&&((zt=T.debounceRendering)||setTimeout)(Ge)}function Ge(){for(var e;Ge.__r=Ae.length;)e=Ae.sort(function(t,n){return t.__v.__b-n.__v.__b}),Ae=[],e.some(function(t){var n,r,i,a,s,l;t.__d&&(s=(a=(n=t).__v).__e,(l=n.__P)&&(r=[],(i=de({},a)).__v=a.__v+1,Ct(l,a,i,n.__n,l.ownerSVGElement!==void 0,a.__h!=null?[s]:null,r,s==null?pe(a):s,a.__h),Pn(r,a),a.__e!=s&&On(a)))})}function An(e,t,n,r,i,a,s,l,d,c){var o,x,b,v,E,U,O,I=r&&r.__k||kn,B=I.length;for(n.__k=[],o=0;o<t.length;o++)if((v=n.__k[o]=(v=t[o])==null||typeof v=="boolean"?null:typeof v=="string"||typeof v=="number"||typeof v=="bigint"?qe(null,v,null,null,v):Array.isArray(v)?qe(W,{children:v},null,null,null):v.__b>0?qe(v.type,v.props,v.key,v.ref?v.ref:null,v.__v):v)!=null){if(v.__=n,v.__b=n.__b+1,(b=I[o])===null||b&&v.key==b.key&&v.type===b.type)I[o]=void 0;else for(x=0;x<B;x++){if((b=I[x])&&v.key==b.key&&v.type===b.type){I[x]=void 0;break}b=null}Ct(e,v,b=b||We,i,a,s,l,d,c),E=v.__e,(x=v.ref)&&b.ref!=x&&(O||(O=[]),b.ref&&O.push(b.ref,null,v),O.push(x,v.__c||E,v)),E!=null?(U==null&&(U=E),typeof v.type=="function"&&v.__k===b.__k?v.__d=d=Rn(v,d,e):d=Nn(e,v,b,I,E,d),typeof n.type=="function"&&(n.__d=d)):d&&b.__e==d&&d.parentNode!=e&&(d=pe(b))}for(n.__e=U,o=B;o--;)I[o]!=null&&(typeof n.type=="function"&&I[o].__e!=null&&I[o].__e==n.__d&&(n.__d=pe(r,o+1)),In(I[o],I[o]));if(O)for(o=0;o<O.length;o++)$n(O[o],O[++o],O[++o])}function Rn(e,t,n){for(var r,i=e.__k,a=0;i&&a<i.length;a++)(r=i[a])&&(r.__=e,t=typeof r.type=="function"?Rn(r,t,n):Nn(n,r,r,i,r.__e,t));return t}function Nn(e,t,n,r,i,a){var s,l,d;if(t.__d!==void 0)s=t.__d,t.__d=void 0;else if(n==null||i!=a||i.parentNode==null)e:if(a==null||a.parentNode!==e)e.appendChild(i),s=null;else{for(l=a,d=0;(l=l.nextSibling)&&d<r.length;d+=2)if(l==i)break e;e.insertBefore(i,a),s=a}return s!==void 0?s:i.nextSibling}function vr(e,t,n,r,i){var a;for(a in n)a==="children"||a==="key"||a in t||Ke(e,a,null,n[a],r);for(a in t)i&&typeof t[a]!="function"||a==="children"||a==="key"||a==="value"||a==="checked"||n[a]===t[a]||Ke(e,a,t[a],n[a],r)}function Wt(e,t,n){t[0]==="-"?e.setProperty(t,n):e[t]=n==null?"":typeof n!="number"||gr.test(t)?n:n+"px"}function Ke(e,t,n,r,i){var a;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Wt(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Wt(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")a=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?r||e.addEventListener(t,a?Kt:Gt,a):e.removeEventListener(t,a?Kt:Gt,a);else if(t!=="dangerouslySetInnerHTML"){if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=n==null?"":n;break e}catch{}typeof n=="function"||(n!=null&&(n!==!1||t[0]==="a"&&t[1]==="r")?e.setAttribute(t,n):e.removeAttribute(t))}}function Gt(e){this.l[e.type+!1](T.event?T.event(e):e)}function Kt(e){this.l[e.type+!0](T.event?T.event(e):e)}function Ct(e,t,n,r,i,a,s,l,d){var c,o,x,b,v,E,U,O,I,B,P,X,q,z=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(d=n.__h,l=t.__e=n.__e,t.__h=null,a=[l]),(c=T.__b)&&c(t);try{e:if(typeof z=="function"){if(O=t.props,I=(c=z.contextType)&&r[c.__c],B=c?I?I.props.value:c.__:r,n.__c?U=(o=t.__c=n.__c).__=o.__E:("prototype"in z&&z.prototype.render?t.__c=o=new z(O,B):(t.__c=o=new Fe(O,B),o.constructor=z,o.render=pr),I&&I.sub(o),o.props=O,o.state||(o.state={}),o.context=B,o.__n=r,x=o.__d=!0,o.__h=[]),o.__s==null&&(o.__s=o.state),z.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=de({},o.__s)),de(o.__s,z.getDerivedStateFromProps(O,o.__s))),b=o.props,v=o.state,x)z.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(z.getDerivedStateFromProps==null&&O!==b&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(O,B),!o.__e&&o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(O,o.__s,B)===!1||t.__v===n.__v){o.props=O,o.state=o.__s,t.__v!==n.__v&&(o.__d=!1),o.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(ie){ie&&(ie.__=t)}),o.__h.length&&s.push(o);break e}o.componentWillUpdate!=null&&o.componentWillUpdate(O,o.__s,B),o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(b,v,E)})}if(o.context=B,o.props=O,o.__v=t,o.__P=e,P=T.__r,X=0,"prototype"in z&&z.prototype.render)o.state=o.__s,o.__d=!1,P&&P(t),c=o.render(o.props,o.state,o.context);else do o.__d=!1,P&&P(t),c=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++X<25);o.state=o.__s,o.getChildContext!=null&&(r=de(de({},r),o.getChildContext())),x||o.getSnapshotBeforeUpdate==null||(E=o.getSnapshotBeforeUpdate(b,v)),q=c!=null&&c.type===W&&c.key==null?c.props.children:c,An(e,Array.isArray(q)?q:[q],t,n,r,i,a,s,l,d),o.base=t.__e,t.__h=null,o.__h.length&&s.push(o),U&&(o.__E=o.__=null),o.__e=!1}else a==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=br(n.__e,t,n,r,i,a,s,d);(c=T.diffed)&&c(t)}catch(ie){t.__v=null,(d||a!=null)&&(t.__e=l,t.__h=!!d,a[a.indexOf(l)]=null),T.__e(ie,t,n)}}function Pn(e,t){T.__c&&T.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(r){r.call(n)})}catch(r){T.__e(r,n.__v)}})}function br(e,t,n,r,i,a,s,l){var d,c,o,x=n.props,b=t.props,v=t.type,E=0;if(v==="svg"&&(i=!0),a!=null){for(;E<a.length;E++)if((d=a[E])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){e=d,a[E]=null;break}}if(e==null){if(v===null)return document.createTextNode(b);e=i?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,b.is&&b),a=null,l=!1}if(v===null)x===b||l&&e.data===b||(e.data=b);else{if(a=a&&nt.call(e.childNodes),c=(x=n.props||We).dangerouslySetInnerHTML,o=b.dangerouslySetInnerHTML,!l){if(a!=null)for(x={},E=0;E<e.attributes.length;E++)x[e.attributes[E].name]=e.attributes[E].value;(o||c)&&(o&&(c&&o.__html==c.__html||o.__html===e.innerHTML)||(e.innerHTML=o&&o.__html||""))}if(vr(e,b,x,i,l),o)t.__k=[];else if(E=t.props.children,An(e,Array.isArray(E)?E:[E],t,n,r,i&&v!=="foreignObject",a,s,a?a[0]:n.__k&&pe(n,0),l),a!=null)for(E=a.length;E--;)a[E]!=null&&Cn(a[E]);l||("value"in b&&(E=b.value)!==void 0&&(E!==e.value||v==="progress"&&!E||v==="option"&&E!==x.value)&&Ke(e,"value",E,x.value,!1),"checked"in b&&(E=b.checked)!==void 0&&E!==e.checked&&Ke(e,"checked",E,x.checked,!1))}return e}function $n(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){T.__e(r,n)}}function In(e,t,n){var r,i;if(T.unmount&&T.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||$n(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){T.__e(a,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&In(r[i],t,typeof e.type!="function");n||e.__e==null||Cn(e.__e),e.__=e.__e=e.__d=void 0}function pr(e,t,n){return this.constructor(e,n)}function wr(e,t,n){var r,i,a;T.__&&T.__(e,t),i=(r=typeof n=="function")?null:n&&n.__k||t.__k,a=[],Ct(t,e=(!r&&n||t).__k=xr(W,null,[e]),i||We,We,t.ownerSVGElement!==void 0,!r&&n?[n]:i?null:t.firstChild?nt.call(t.childNodes):null,a,!r&&n?n:i?i.__e:t.firstChild,r),Pn(a,e)}nt=kn.slice,T={__e:function(e,t,n,r){for(var i,a,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&a.getDerivedStateFromError!=null&&(i.setState(a.getDerivedStateFromError(e)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),s=i.__d),s)return i.__E=i}catch(l){e=l}throw e}},Tn=0,Fe.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=de({},this.state),typeof e=="function"&&(e=e(de({},n),this.props)),e&&de(n,e),e!=null&&this.__v&&(t&&this.__h.push(t),Ht(this))},Fe.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ht(this))},Fe.prototype.render=W,Ae=[],Ge.__r=0;var Me,F,ut,Yt,Re=0,Mn=[],Ve=[],Jt=T.__b,Xt=T.__r,Qt=T.diffed,Zt=T.__c,en=T.unmount;function rt(e,t){T.__h&&T.__h(F,e,Re||t),Re=0;var n=F.__H||(F.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Ve}),n.__[e]}function J(e){return Re=1,yt(Ln,e)}function yt(e,t,n){var r=rt(Me++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Ln(void 0,t),function(a){var s=r.__N?r.__N[0]:r.__[0],l=r.t(s,a);s!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=F,!F.u)){F.u=!0;var i=F.shouldComponentUpdate;F.shouldComponentUpdate=function(a,s,l){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(o){return o.__c});if(d.every(function(o){return!o.__N}))return!i||i.call(this,a,s,l);var c=!1;return d.forEach(function(o){if(o.__N){var x=o.__[0];o.__=o.__N,o.__N=void 0,x!==o.__[0]&&(c=!0)}}),!!c&&(!i||i.call(this,a,s,l))}}return r.__N||r.__}function Ne(e,t){var n=rt(Me++,3);!T.__s&&Ot(n.__H,t)&&(n.__=e,n.i=t,F.__H.__h.push(n))}function Er(e,t){var n=rt(Me++,4);!T.__s&&Ot(n.__H,t)&&(n.__=e,n.i=t,F.__h.push(n))}function Ye(e){return Re=5,Un(function(){return{current:e}},[])}function Un(e,t){var n=rt(Me++,7);return Ot(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Sr(e,t){return Re=8,Un(function(){return e},t)}function Tr(){for(var e;e=Mn.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ze),e.__H.__h.forEach(gt),e.__H.__h=[]}catch(t){e.__H.__h=[],T.__e(t,e.__v)}}T.__b=function(e){typeof e.type!="function"||e.o||e.type===W?e.o||(e.o=e.__&&e.__.o?e.__.o:""):e.o=(e.__&&e.__.o?e.__.o:"")+(e.__&&e.__.__k?e.__.__k.indexOf(e):0),F=null,Jt&&Jt(e)},T.__r=function(e){Xt&&Xt(e),Me=0;var t=(F=e.__c).__H;t&&(ut===F?(t.__h=[],F.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Ve,n.__N=n.i=void 0})):(t.__h.forEach(ze),t.__h.forEach(gt),t.__h=[])),ut=F},T.diffed=function(e){Qt&&Qt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Mn.push(t)!==1&&Yt===T.requestAnimationFrame||((Yt=T.requestAnimationFrame)||kr)(Tr)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Ve&&(n.__=n.__V),n.i=void 0,n.__V=Ve})),ut=F=null},T.__c=function(e,t){t.some(function(n){try{n.__h.forEach(ze),n.__h=n.__h.filter(function(r){return!r.__||gt(r)})}catch(r){t.some(function(i){i.__h&&(i.__h=[])}),t=[],T.__e(r,n.__v)}}),Zt&&Zt(e,t)},T.unmount=function(e){en&&en(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{ze(r)}catch(i){t=i}}),n.__H=void 0,t&&T.__e(t,n.__v))};var tn=typeof requestAnimationFrame=="function";function kr(e){var t,n=function(){clearTimeout(r),tn&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);tn&&(t=requestAnimationFrame(n))}function ze(e){var t=F,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),F=t}function gt(e){var t=F;e.__c=e.__(),F=t}function Ot(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function Ln(e,t){return typeof t=="function"?t(e):t}function re(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function we(e){return!!e&&!!e[$]}function fe(e){return!!e&&(function(t){if(!t||typeof t!="object")return!1;var n=Object.getPrototypeOf(t);if(n===null)return!0;var r=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return r===Object||typeof r=="function"&&Function.toString.call(r)===Ur}(e)||Array.isArray(e)||!!e[un]||!!e.constructor[un]||At(e)||Rt(e))}function Ee(e,t,n){n===void 0&&(n=!1),Te(e)===0?(n?Object.keys:Mt)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Te(e){var t=e[$];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:At(e)?2:Rt(e)?3:0}function xt(e,t){return Te(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Cr(e,t){return Te(e)===2?e.get(t):e[t]}function Dn(e,t,n){var r=Te(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function Or(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function At(e){return Ir&&e instanceof Map}function Rt(e){return Mr&&e instanceof Set}function K(e){return e.o||e.t}function Nt(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Lr(e);delete t[$];for(var n=Mt(t),r=0;r<n.length;r++){var i=n[r],a=t[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Pt(e,t){return t===void 0&&(t=!1),$t(e)||we(e)||!fe(e)||(Te(e)>1&&(e.set=e.add=e.clear=e.delete=Ar),Object.freeze(e),t&&Ee(e,function(n,r){return Pt(r,!0)},!0)),e}function Ar(){re(2)}function $t(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function oe(e){var t=bt[e];return t||re(18,e),t}function Rr(e,t){bt[e]||(bt[e]=t)}function Je(){return $e}function ct(e,t){t&&(oe("Patches"),e.u=[],e.s=[],e.v=t)}function Xe(e){vt(e),e.p.forEach(Nr),e.p=null}function vt(e){e===$e&&($e=e.l)}function nn(e){return $e={p:[],l:$e,h:e,m:!0,_:0}}function Nr(e){var t=e[$];t.i===0||t.i===1?t.j():t.O=!0}function ft(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||oe("ES5").S(t,e,r),r?(n[$].P&&(Xe(t),re(4)),fe(e)&&(e=Qe(t,e),t.l||Ze(t,e)),t.u&&oe("Patches").M(n[$].t,e,t.u,t.s)):e=Qe(t,n,[]),Xe(t),t.u&&t.v(t.u,t.s),e!==jn?e:void 0}function Qe(e,t,n){if($t(t))return t;var r=t[$];if(!r)return Ee(t,function(a,s){return rn(e,r,t,a,s,n)},!0),t;if(r.A!==e)return t;if(!r.P)return Ze(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Nt(r.k):r.o;Ee(r.i===3?new Set(i):i,function(a,s){return rn(e,r,i,a,s,n)}),Ze(e,i,!1),n&&e.u&&oe("Patches").R(r,n,e.u,e.s)}return r.o}function rn(e,t,n,r,i,a){if(we(i)){var s=Qe(e,i,a&&t&&t.i!==3&&!xt(t.D,r)?a.concat(r):void 0);if(Dn(n,r,s),!we(s))return;e.m=!1}if(fe(i)&&!$t(i)){if(!e.h.F&&e._<1)return;Qe(e,i),t&&t.A.l||Ze(e,i)}}function Ze(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&Pt(t,n)}function dt(e,t){var n=e[$];return(n?K(n):e)[t]}function an(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function le(e){e.P||(e.P=!0,e.l&&le(e.l))}function ht(e){e.o||(e.o=Nt(e.t))}function Pe(e,t,n){var r=At(t)?oe("MapSet").N(t,n):Rt(t)?oe("MapSet").T(t,n):e.g?function(i,a){var s=Array.isArray(i),l={i:s?1:0,A:a?a.A:Je(),P:!1,I:!1,D:{},l:a,t:i,k:null,o:null,j:null,C:!1},d=l,c=pt;s&&(d=[l],c=Oe);var o=Proxy.revocable(d,c),x=o.revoke,b=o.proxy;return l.k=b,l.j=x,b}(t,n):oe("ES5").J(t,n);return(n?n.A:Je()).p.push(r),r}function Pr(e){return we(e)||re(22,e),function t(n){if(!fe(n))return n;var r,i=n[$],a=Te(n);if(i){if(!i.P&&(i.i<4||!oe("ES5").K(i)))return i.t;i.I=!0,r=on(n,a),i.I=!1}else r=on(n,a);return Ee(r,function(s,l){i&&Cr(i.t,s)===l||Dn(r,s,t(l))}),a===3?new Set(r):r}(e)}function on(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Nt(e)}function $r(){function e(l,d){function c(){this.constructor=l}i(l,d),l.prototype=(c.prototype=d.prototype,new c)}function t(l){l.o||(l.D=new Map,l.o=new Map(l.t))}function n(l){l.o||(l.o=new Set,l.t.forEach(function(d){if(fe(d)){var c=Pe(l.A.h,d,l);l.p.set(d,c),l.o.add(c)}else l.o.add(d)}))}function r(l){l.O&&re(3,JSON.stringify(K(l)))}var i=function(l,d){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,o){c.__proto__=o}||function(c,o){for(var x in o)o.hasOwnProperty(x)&&(c[x]=o[x])})(l,d)},a=function(){function l(c,o){return this[$]={i:2,l:o,A:o?o.A:Je(),P:!1,I:!1,o:void 0,D:void 0,t:c,k:this,C:!1,O:!1},this}e(l,Map);var d=l.prototype;return Object.defineProperty(d,"size",{get:function(){return K(this[$]).size}}),d.has=function(c){return K(this[$]).has(c)},d.set=function(c,o){var x=this[$];return r(x),K(x).has(c)&&K(x).get(c)===o||(t(x),le(x),x.D.set(c,!0),x.o.set(c,o),x.D.set(c,!0)),this},d.delete=function(c){if(!this.has(c))return!1;var o=this[$];return r(o),t(o),le(o),o.t.has(c)?o.D.set(c,!1):o.D.delete(c),o.o.delete(c),!0},d.clear=function(){var c=this[$];r(c),K(c).size&&(t(c),le(c),c.D=new Map,Ee(c.t,function(o){c.D.set(o,!1)}),c.o.clear())},d.forEach=function(c,o){var x=this;K(this[$]).forEach(function(b,v){c.call(o,x.get(v),v,x)})},d.get=function(c){var o=this[$];r(o);var x=K(o).get(c);if(o.I||!fe(x)||x!==o.t.get(c))return x;var b=Pe(o.A.h,x,o);return t(o),o.o.set(c,b),b},d.keys=function(){return K(this[$]).keys()},d.values=function(){var c,o=this,x=this.keys();return(c={})[Le]=function(){return o.values()},c.next=function(){var b=x.next();return b.done?b:{done:!1,value:o.get(b.value)}},c},d.entries=function(){var c,o=this,x=this.keys();return(c={})[Le]=function(){return o.entries()},c.next=function(){var b=x.next();if(b.done)return b;var v=o.get(b.value);return{done:!1,value:[b.value,v]}},c},d[Le]=function(){return this.entries()},l}(),s=function(){function l(c,o){return this[$]={i:3,l:o,A:o?o.A:Je(),P:!1,I:!1,o:void 0,t:c,k:this,p:new Map,O:!1,C:!1},this}e(l,Set);var d=l.prototype;return Object.defineProperty(d,"size",{get:function(){return K(this[$]).size}}),d.has=function(c){var o=this[$];return r(o),o.o?!!o.o.has(c)||!(!o.p.has(c)||!o.o.has(o.p.get(c))):o.t.has(c)},d.add=function(c){var o=this[$];return r(o),this.has(c)||(n(o),le(o),o.o.add(c)),this},d.delete=function(c){if(!this.has(c))return!1;var o=this[$];return r(o),n(o),le(o),o.o.delete(c)||!!o.p.has(c)&&o.o.delete(o.p.get(c))},d.clear=function(){var c=this[$];r(c),K(c).size&&(n(c),le(c),c.o.clear())},d.values=function(){var c=this[$];return r(c),n(c),c.o.values()},d.entries=function(){var c=this[$];return r(c),n(c),c.o.entries()},d.keys=function(){return this.values()},d[Le]=function(){return this.values()},d.forEach=function(c,o){for(var x=this.values(),b=x.next();!b.done;)c.call(o,b.value,b.value,this),b=x.next()},l}();Rr("MapSet",{N:function(l,d){return new a(l,d)},T:function(l,d){return new s(l,d)}})}var sn,$e,It=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Ir=typeof Map<"u",Mr=typeof Set<"u",ln=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",jn=It?Symbol.for("immer-nothing"):((sn={})["immer-nothing"]=!0,sn),un=It?Symbol.for("immer-draftable"):"__$immer_draftable",$=It?Symbol.for("immer-state"):"__$immer_state",Le=typeof Symbol<"u"&&Symbol.iterator||"@@iterator",Ur=""+Object.prototype.constructor,Mt=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Lr=Object.getOwnPropertyDescriptors||function(e){var t={};return Mt(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},bt={},pt={get:function(e,t){if(t===$)return e;var n=K(e);if(!xt(n,t))return function(i,a,s){var l,d=an(a,s);return d?"value"in d?d.value:(l=d.get)===null||l===void 0?void 0:l.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!fe(r)?r:r===dt(e.t,t)?(ht(e),e.o[t]=Pe(e.A.h,r,e)):r},has:function(e,t){return t in K(e)},ownKeys:function(e){return Reflect.ownKeys(K(e))},set:function(e,t,n){var r=an(K(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=dt(K(e),t),a=i==null?void 0:i[$];if(a&&a.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Or(n,i)&&(n!==void 0||xt(e.t,t)))return!0;ht(e),le(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return dt(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,ht(e),le(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=K(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){re(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){re(12)}},Oe={};Ee(pt,function(e,t){Oe[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Oe.deleteProperty=function(e,t){return Oe.set.call(this,e,t,void 0)},Oe.set=function(e,t,n){return pt.set.call(this,e[0],t,n,e[0])};var Dr=function(){function e(n){var r=this;this.g=ln,this.F=!0,this.produce=function(i,a,s){if(typeof i=="function"&&typeof a!="function"){var l=a;a=i;var d=r;return function(U){var O=this;U===void 0&&(U=l);for(var I=arguments.length,B=Array(I>1?I-1:0),P=1;P<I;P++)B[P-1]=arguments[P];return d.produce(U,function(X){var q;return(q=a).call.apply(q,[O,X].concat(B))})}}var c;if(typeof a!="function"&&re(6),s!==void 0&&typeof s!="function"&&re(7),fe(i)){var o=nn(r),x=Pe(r,i,void 0),b=!0;try{c=a(x),b=!1}finally{b?Xe(o):vt(o)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(U){return ct(o,s),ft(U,o)},function(U){throw Xe(o),U}):(ct(o,s),ft(c,o))}if(!i||typeof i!="object"){if((c=a(i))===void 0&&(c=i),c===jn&&(c=void 0),r.F&&Pt(c,!0),s){var v=[],E=[];oe("Patches").M(i,c,v,E),s(v,E)}return c}re(21,i)},this.produceWithPatches=function(i,a){if(typeof i=="function")return function(c){for(var o=arguments.length,x=Array(o>1?o-1:0),b=1;b<o;b++)x[b-1]=arguments[b];return r.produceWithPatches(c,function(v){return i.apply(void 0,[v].concat(x))})};var s,l,d=r.produce(i,a,function(c,o){s=c,l=o});return typeof Promise<"u"&&d instanceof Promise?d.then(function(c){return[c,s,l]}):[d,s,l]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){fe(n)||re(8),we(n)&&(n=Pr(n));var r=nn(this),i=Pe(this,n,void 0);return i[$].C=!0,vt(r),i},t.finishDraft=function(n,r){var i=n&&n[$],a=i.A;return ct(a,r),ft(void 0,a)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!ln&&re(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var a=r[i];if(a.path.length===0&&a.op==="replace"){n=a.value;break}}i>-1&&(r=r.slice(i+1));var s=oe("Patches").$;return we(n)?s(n,r):this.produce(n,function(l){return s(l,r)})},e}(),ee=new Dr,wt=ee.produce;ee.produceWithPatches.bind(ee);ee.setAutoFreeze.bind(ee);ee.setUseProxies.bind(ee);ee.applyPatches.bind(ee);ee.createDraft.bind(ee);ee.finishDraft.bind(ee);var jr=0;function _(e,t,n,r,i){var a,s,l={};for(s in t)s=="ref"?a=t[s]:l[s]=t[s];var d={type:e,props:l,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--jr,__source:i,__self:r};if(typeof e=="function"&&(a=e.defaultProps))for(s in a)l[s]===void 0&&(l[s]=a[s]);return T.vnode&&T.vnode(d),d}const Bn=e=>_(ge,{value:e.value,onChange:e.onChange,tabIndex:-1,options:{string:{text:"TEXT"},number:{text:"NUMERIC"},null:{text:"NULL"},blob:{text:"BLOB"}}}),qn=(e,t)=>{var n,r;return t==="null"?null:t==="number"?+e:t==="blob"?Uint8Array.from((r=(n=e.match(/.{1, 2}/g))==null?void 0:n.map(i=>parseInt(i,16)))!=null?r:[]):e},ge=e=>{var r;const t=Ye(),n=Ye();return Er(()=>{!t.current||!n.current||(t.current.style.width=n.current.offsetWidth+"px")}),e.options[e.value]===void 0&&console.log(e.options,e.value),_(W,{children:[_("select",{autocomplete:"off",value:e.value,style:{paddingLeft:"15px",paddingRight:"15px",...e.style},className:e.className,ref:t,onChange:i=>e.onChange(i.currentTarget.value),tabIndex:e.tabIndex,children:Object.keys(e.options).map(i=>{var a;return _("option",{value:i,disabled:e.options[i].disabled,title:e.options[i].disabled?e.options[i].disabledReason:void 0,children:(a=e.options[i].text)!=null?a:i})})}),_("span",{style:{userSelect:"none",display:"inline-block",pointerEvents:"none",width:0,height:0,overflow:"hidden"},children:_("select",{autocomplete:"off",value:e.value,style:{paddingLeft:"15px",paddingRight:"15px",...e.style,visibility:"hidden"},className:e.className,ref:n,onChange:i=>e.onChange(i.currentTarget.value),children:_("option",{value:e.value,tabIndex:-1,children:(r=e.options[e.value].text)!=null?r:e.value})})})]})},_e=e=>_("input",{type:"button",value:"Commit",style:{display:"block",...e.style},className:"primary",onClick:e.onClick}),be=e=>_("label",{style:{marginRight:"8px",...e.style},children:[_("input",{type:"checkbox",checked:e.checked,onChange:t=>e.onChange(t.currentTarget.checked),tabIndex:e.tabIndex})," ",e.text]}),Fn=e=>_(W,{children:[_("input",{tabIndex:0,placeholder:"column-name",style:{marginRight:"8px"},value:e.value.name,onInput:t=>{e.onChange({...e.value,name:t.currentTarget.value})}}),!e.columnNameOnly&&_(W,{children:[_(ge,{tabIndex:0,style:{marginRight:"8px"},value:e.value.affinity,onChange:t=>e.onChange({...e.value,affinity:t}),options:{TEXT:{},NUMERIC:{},INTEGER:{},REAL:{},BLOB:{},ANY:{}}}),_(be,{tabIndex:-1,checked:e.value.primary,onChange:t=>e.onChange({...e.value,primary:t}),text:"PRIMARY KEY"}),_(be,{tabIndex:-1,checked:e.value.autoIncrement,onChange:t=>e.onChange({...e.value,autoIncrement:t}),text:"AUTOINCREMENT"}),_(be,{tabIndex:-1,checked:e.value.unique,onChange:t=>e.onChange({...e.value,unique:t}),text:"UNIQUE"}),_(be,{tabIndex:-1,checked:e.value.notNull,onChange:t=>e.onChange({...e.value,notNull:t}),text:"NOT NULL"})]})]}),Vn=e=>`${M(e.name)} ${e.affinity}${e.primary?" PRIMARY KEY":""}${e.autoIncrement?" AUTOINCREMENT":""}${e.unique?" UNIQUE":""}${e.notNull?" NOT NULL":""}`,zn="INSERT";let Ut;const Br=(e,t)=>Ut=async n=>{if(n===void 0)return;const r=await t.getTableInfo(n);e({statement:zn,tableName:n,tableInfo:r,values:r.map(()=>""),dataTypes:r.map(({type:i})=>(i=i.toLowerCase(),i==="numeric"||i==="real"||i==="int"||i==="integer"?"number":i==="text"?"string":i==="null"||i==="blob"?i:"string"))})},qr=e=>{const t=`INTO ${M(e.state.tableName)} (${e.state.tableInfo.map(({name:n})=>n).map(M).join(", ")}) VALUES (${e.state.tableInfo.map(()=>"?").join(", ")})`;return _(W,{children:[_("h2",{children:[e.statementSelect," ",t]}),_("div",{children:[_("ul",{children:e.state.tableInfo.map(({name:n},r)=>_("li",{children:[_("div",{style:{marginRight:"1em"},children:n}),_("textarea",{autocomplete:"off",rows:1,style:{width:"100%",resize:"vertical",display:"block",color:Vt(e.state.dataTypes[r])},value:e.state.dataTypes[r]==="null"?"null":e.state.values[r],onChange:i=>{e.setState(wt(e.state,a=>{a.values[r]=i.currentTarget.value}))},disabled:e.state.dataTypes[r]==="null",tabIndex:0}),"AS ",_(Bn,{value:e.state.dataTypes[r],onChange:i=>{e.setState(wt(e.state,a=>{a.dataTypes[r]=i}))}})]}))}),_(_e,{style:{marginTop:"10px",marginBottom:"10px"},onClick:()=>e.commit(`INSERT ${t}`,e.state.values.map((n,r)=>qn(n,e.state.dataTypes[r])),{})})]})]})},Fr=Object.freeze(Object.defineProperty({__proto__:null,statement:zn,get open(){return Ut},buildDispatch:Br,Editor:qr},Symbol.toStringTag,{value:"Module"})),Hn="CREATE TABLE";let it;const Vr=e=>{var n;const t=[...e.value];for(;((n=t.at(-1))==null?void 0:n.name)==="";)t.pop();return(t.length===0||t.at(-1).name!=="")&&t.push({name:"",affinity:"TEXT",autoIncrement:!1,notNull:!1,primary:!1,unique:!1}),_("ul",{children:t.map((r,i)=>_("li",{children:_(Fn,{columnNameOnly:r.name==="",value:r,onChange:a=>{e.onChange(wt(t,s=>{var l;s[i]=a,((l=s.at(-1))==null?void 0:l.name)===""&&s.pop()}))}})},i))})},zr=(e,t)=>it=async()=>{e({statement:Hn,strict:!0,tableConstraints:"",tableName:"",withoutRowId:!1})},Hr=e=>{const[t,n]=J([]);return _(W,{children:[_("h2",{children:[e.statementSelect," ",_("input",{placeholder:"table-name",value:e.state.tableName,onChange:r=>{e.setState({...e.state,tableName:r.currentTarget.value})}}),"(...)",_(be,{checked:e.state.withoutRowId,onChange:r=>{e.setState({...e.state,withoutRowId:r})},style:{marginLeft:"8px"},text:"WITHOUT ROWID"}),_(be,{checked:e.state.strict,onChange:r=>{e.setState({...e.state,strict:r})},text:"STRICT"})]}),_("div",{children:[_(Vr,{value:t,onChange:n}),_("textarea",{autocomplete:"off",style:{marginTop:"10px",height:"20vh"},placeholder:"FOREIGN KEY(column-name) REFERENCES table-name(column-name)",value:e.state.tableConstraints,onChange:r=>{e.setState({...e.state,tableConstraints:r.currentTarget.value})}}),_(_e,{style:{marginTop:"10px",marginBottom:"10px"},onClick:()=>e.commit(`CREATE TABLE ${M(e.state.tableName)} (${t.map(Vn).join(", ")}${e.state.tableConstraints.trim()!==""?e.state.tableConstraints.trim().startsWith(",")?e.state.tableConstraints:", "+e.state.tableConstraints:""})${e.state.strict?" STRICT":""}${e.state.withoutRowId?" WITHOUT ROWID":""}`,[],{refreshTableList:!0,selectTable:e.state.tableName})})]})]})},Wr=Object.freeze(Object.defineProperty({__proto__:null,statement:Hn,get open(){return it},buildDispatch:zr,Editor:Hr},Symbol.toStringTag,{value:"Module"})),Wn="DROP TABLE";let Gn;const Gr=(e,t)=>Gn=async n=>{n!==void 0&&e({statement:Wn,tableName:n})},Kr=e=>_(W,{children:[_("h2",{children:[e.statementSelect," ",M(e.state.tableName)]}),_("div",{children:_(_e,{style:{marginBottom:"10px"},onClick:()=>e.commit(`DROP TABLE ${M(e.state.tableName)}`,[],{refreshTableList:!0})})})]}),Yr=Object.freeze(Object.defineProperty({__proto__:null,statement:Wn,get open(){return Gn},buildDispatch:Gr,Editor:Kr},Symbol.toStringTag,{value:"Module"})),Kn="DROP VIEW";let Yn;const Jr=(e,t)=>Yn=async n=>{n!==void 0&&e({statement:Kn,tableName:n})},Xr=e=>_(W,{children:[_("h2",{children:[e.statementSelect," ",M(e.state.tableName)]}),_("div",{children:_(_e,{style:{marginBottom:"10px"},onClick:()=>e.commit(`DROP VIEW ${M(e.state.tableName)}`,[],{refreshTableList:!0})})})]}),Qr=Object.freeze(Object.defineProperty({__proto__:null,statement:Kn,get open(){return Yn},buildDispatch:Jr,Editor:Xr},Symbol.toStringTag,{value:"Module"})),Jn="UPDATE";let Lt;const Zr=(e,t)=>Lt=async(n,r,i,a)=>{if(n===void 0||r===void 0||i===void 0||a===void 0)return;const s=i[r],l=await t.listUniqueConstraints(n),d=("rowid"in i?[["rowid"]]:[]).concat(l.sort((c,o)=>+o.primary-+c.primary).map(({columns:c})=>c).filter(c=>c.every(o=>i[o]!==null)));d.length!==0&&e({statement:Jn,tableName:n,column:r,record:i,textareaValue:s instanceof Uint8Array?mr(s):s+"",type:s===null?"null":s instanceof Uint8Array?"blob":typeof s=="number"?"number":"string",constraintChoices:d,td:a})},ei=e=>{const[t,n]=J(0),r=Ye(null);return Ne(()=>{var i;(i=r.current)==null||i.focus()},[e.state.td]),_(W,{children:[_("h2",{children:[e.statementSelect," ",M(e.state.tableName)," SET ",M(e.state.column)," = ? WHERE ",_("select",{value:t,onChange:i=>{n(+i.currentTarget.value)},children:e.state.constraintChoices.map((i,a)=>_("option",{value:a,children:i.map(s=>`${s} = ${_r(e.state.record[s])}`).join(" AND ")}))})]}),_("div",{children:[_("textarea",{ref:r,autocomplete:"off",style:{height:"20vh",color:Vt(e.state.type)},value:e.state.type==="null"?"null":e.state.textareaValue,onChange:i=>e.setState({...e.state,textareaValue:i.currentTarget.value}),disabled:e.state.type==="null"}),"AS ",_(Bn,{value:e.state.type,onChange:i=>{e.setState({...e.state,type:i})}}),_(_e,{style:{marginTop:"10px",marginBottom:"10px"},onClick:()=>{const i=e.state.constraintChoices[t];e.commit(`UPDATE ${M(e.state.tableName)} SET ${M(e.state.column)} = ? WHERE ${i.map(a=>`${a} = ?`).join(" AND ")}`,[qn(e.state.textareaValue,e.state.type),...i.map(a=>e.state.record[a])],{}),it()}})]})]})},ti=Object.freeze(Object.defineProperty({__proto__:null,statement:Jn,get open(){return Lt},buildDispatch:Zr,Editor:ei},Symbol.toStringTag,{value:"Module"})),Xn="DELETE";let Dt;const ni=(e,t)=>Dt=async(n,r,i)=>{if(n===void 0||r===void 0||i===void 0)return;const a=await t.listUniqueConstraints(n);e({statement:Xn,tableName:n,record:r,constraintChoices:("rowid"in r?[["rowid"]]:[]).concat(a.sort((s,l)=>+l.primary-+s.primary).map(({columns:s})=>s).filter(s=>s.every(l=>r[l]!==null))),selectedConstraint:0,tr:i})},ri=e=>{const t=e.state.constraintChoices[e.state.selectedConstraint];return _(W,{children:[_("h2",{children:[e.statementSelect," ","FROM ",M(e.state.tableName)," WHERE ",_("select",{value:e.state.selectedConstraint,onChange:n=>{e.setState({...e.state,selectedConstraint:+n.currentTarget.value})},children:e.state.constraintChoices.map((n,r)=>_("option",{value:r,children:n.map(i=>`${i} = ${_r(e.state.record[i])}`).join(" AND ")}))})]}),_("div",{children:_(_e,{style:{marginBottom:"10px"},onClick:()=>e.commit(`DELETE FROM ${M(e.state.tableName)} WHERE ${t.map(n=>`${n} = ?`).join(" AND ")}`,[...t.map(n=>e.state.record[n])],{})})})]})},ii=Object.freeze(Object.defineProperty({__proto__:null,statement:Xn,get open(){return Dt},buildDispatch:ni,Editor:ri},Symbol.toStringTag,{value:"Module"})),Qn="ALTER TABLE";let jt;const ai=(e,t)=>jt=async(n,r)=>{n!==void 0&&e({statement:Qn,tableName:n,statement2:r?"RENAME COLUMN":"RENAME TO",oldColumnName:r!=null?r:""})},oi=e=>{const[t,n]=J({name:"",affinity:"TEXT",autoIncrement:!1,notNull:!1,primary:!1,unique:!1}),[r,i]=J(""),[a,s]=J("");return _(W,{children:[_("h2",{children:[e.statementSelect," ",M(e.state.tableName)," ",_(ge,{value:e.state.statement2,onChange:l=>e.setState({...e.state,statement2:l}),options:{"RENAME TO":{},"RENAME COLUMN":{},"DROP COLUMN":{},"ADD COLUMN":{}}})," ",e.state.statement2==="RENAME TO"&&_("input",{placeholder:"table-name",value:r,onChange:l=>i(l.currentTarget.value)}),(e.state.statement2==="RENAME COLUMN"||e.state.statement2==="DROP COLUMN")&&_("input",{placeholder:"column-name",value:e.state.oldColumnName,onChange:l=>e.setState({...state,oldColumnName:l.currentTarget.value})}),e.state.statement2==="RENAME COLUMN"&&_(W,{children:[" TO ",_("input",{placeholder:"column-name",value:a,onChange:l=>s(l.currentTarget.value)})]})]}),_("div",{children:[e.state.statement2==="ADD COLUMN"&&_(Fn,{value:t,onChange:n}),_(_e,{style:{marginBottom:"10px"},onClick:()=>{let l=`ALTER TABLE ${M(e.state.tableName)} ${e.state.statement2} `;switch(e.state.statement2){case"RENAME TO":l+=M(r);break;case"RENAME COLUMN":l+=`${M(e.state.oldColumnName)} TO ${M(a)}`;break;case"DROP COLUMN":l+=M(e.state.oldColumnName);break;case"ADD COLUMN":l+=`${Vn(t)}`;break}e.commit(l,[],{refreshTableList:!0,selectTable:e.state.statement2==="RENAME TO"?r:void 0})}})]})]})},si=Object.freeze(Object.defineProperty({__proto__:null,statement:Qn,get open(){return jt},buildDispatch:ai,Editor:oi},Symbol.toStringTag,{value:"Module"})),Zn="custom";let er;const li=(e,t)=>er=async()=>{e({statement:Zn})},ui=e=>{const[t,n]=J("");return _(W,{children:[_("h2",{children:e.statementSelect}),_("div",{children:[_("textarea",{autocomplete:"off",style:{marginTop:"15px",height:"20vh"},placeholder:"CREATE TABLE table1(column1 INTEGER)",value:t,onChange:r=>{n(r.currentTarget.value)}}),_(_e,{style:{marginBottom:"10px"},onClick:()=>e.commit(t,[],{refreshTableList:!0})})]})]})},ci=Object.freeze(Object.defineProperty({__proto__:null,statement:Zn,get open(){return er},buildDispatch:li,Editor:ui},Symbol.toStringTag,{value:"Module"}));$r();const De=[Fr,Wr,Yr,Qr,ti,ii,si,ci],fi=e=>{var l;const[t,n]=J({statement:"CREATE TABLE",strict:!0,tableConstraints:"",tableName:"",withoutRowId:!1}),r=Sr((d,c,o)=>e.sql.query(d,c,"w+").then(()=>e.onWrite(o)).catch(console.error),[e.onWrite]);Ne(()=>{var d;if(e.tableName===void 0){it();return}switch(t.statement){case"INSERT":case"DROP TABLE":case"DROP VIEW":case"ALTER TABLE":case"DELETE":(d=De.find(({statement:c})=>c===t.statement))==null||d.open(e.tableName);break;case"UPDATE":Ut(e.tableName);break}},[e.tableName]),document.querySelectorAll(".editing").forEach(d=>d.classList.remove("editing")),(t==null?void 0:t.statement)==="UPDATE"?t.td.classList.add("editing"):t.statement==="DELETE"&&t.tr.classList.add("editing");for(const{buildDispatch:d}of De)d(n,e.sql);const{type:i}=(l=e.tableList.find(({name:d})=>d===e.tableName))!=null?l:{},a=_(ge,{value:t.statement,style:{paddingLeft:"15px",paddingRight:"15px"},className:"primary",onChange:async d=>{var c;try{(c=De.find(({statement:o})=>o===d))==null||c.open(e.tableName)}catch(o){console.error(o)}},options:{INSERT:{disabled:i!=="table"&&i!=="virtual",disabledReason:"Select a table or a virtual table."},"CREATE TABLE":{},"DROP TABLE":{disabled:i!=="table",disabledReason:"Select a table."},"DROP VIEW":{disabled:i!=="view",disabledReason:"Select a view."},"ALTER TABLE":{disabled:i!=="table"&&i!=="virtual",disabledReason:"Select a table or a virtual table."},UPDATE:{disabled:!0,disabledReason:"Click a cell."},DELETE:{disabled:!0,disabledReason:"Click a row number."},custom:{}}}),s=De.find(({statement:d})=>d===t.statement);if(!s)throw new Error;return _(s.Editor,{statementSelect:a,state:t,setState:n,commit:r})};var di=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),r=a.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;i--!==0;){var s=a[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n},Et;try{Et=new TextDecoder}catch{}var p,ue,u=0,Z={},R,he,ne=0,ae=0,Y,ce,te=[],A,cn={useRecords:!1,mapsAsObjects:!0};class tr{}const nr=new tr;nr.name="MessagePack 0xC1";var Se=!1,rr=2;try{new Function("")}catch{rr=1/0}class Ie{constructor(t){t&&(t.useRecords===!1&&t.mapsAsObjects===void 0&&(t.mapsAsObjects=!0),t.sequential&&t.trusted!==!1&&(t.trusted=!0,!t.structures&&t.useRecords!=!1&&(t.structures=[],t.maxSharedStructures||(t.maxSharedStructures=0))),t.structures?t.structures.sharedLength=t.structures.length:t.getStructures&&((t.structures=[]).uninitialized=!0,t.structures.sharedLength=0)),Object.assign(this,t)}unpack(t,n){if(p)return lr(()=>(Tt(),this?this.unpack(t,n):Ie.prototype.unpack.call(cn,t,n)));ue=n>-1?n:t.length,u=0,ae=0,he=null,Y=null,p=t;try{A=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(r){throw p=null,t instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof Ie){if(Z=this,this.structures)return R=this.structures,je();(!R||R.length>0)&&(R=[])}else Z=cn,(!R||R.length>0)&&(R=[]);return je()}unpackMultiple(t,n){let r,i=0;try{Se=!0;let a=t.length,s=this?this.unpack(t,a):at.unpack(t,a);if(n){for(n(s);u<a;)if(i=u,n(je())===!1)return}else{for(r=[s];u<a;)i=u,r.push(je());return r}}catch(a){throw a.lastPosition=i,a.values=r,a}finally{Se=!1,Tt()}}_mergeStructures(t,n){t=t||[];for(let r=0,i=t.length;r<i;r++){let a=t[r];a&&(a.isShared=!0,r>=32&&(a.highByte=r-32>>5))}t.sharedLength=t.length;for(let r in n||[])if(r>=0){let i=t[r],a=n[r];a&&(i&&((t.restoreStructures||(t.restoreStructures=[]))[r]=i),t[r]=a)}return this.structures=t}decode(t,n){return this.unpack(t,n)}}function je(){try{if(!Z.trusted&&!Se){let t=R.sharedLength||0;t<R.length&&(R.length=t)}let e=V();if(Y&&(u=Y.postBundlePosition),u==ue)R.restoreStructures&&fn(),R=null,p=null,ce&&(ce=null);else{if(u>ue)throw new Error("Unexpected end of MessagePack data");if(!Se)throw new Error("Data read, but end of buffer not reached "+JSON.stringify(e).slice(0,100))}return e}catch(e){throw R.restoreStructures&&fn(),Tt(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")||u>ue)&&(e.incomplete=!0),e}}function fn(){for(let e in R.restoreStructures)R[e]=R.restoreStructures[e];R.restoreStructures=null}function V(){let e=p[u++];if(e<160)if(e<128){if(e<64)return e;{let t=R[e&63]||Z.getStructures&&ir()[e&63];return t?(t.read||(t.read=Bt(t,e&63)),t.read()):e}}else if(e<144)if(e-=128,Z.mapsAsObjects){let t={};for(let n=0;n<e;n++){let r=or();r==="__proto__"&&(r="__proto_"),t[r]=V()}return t}else{let t=new Map;for(let n=0;n<e;n++)t.set(V(),V());return t}else{e-=144;let t=new Array(e);for(let n=0;n<e;n++)t[n]=V();return t}else if(e<192){let t=e-160;if(ae>=u)return he.slice(u-ne,(u+=t)-ne);if(ae==0&&ue<140){let n=t<16?qt(t):ar(t);if(n!=null)return n}return St(t)}else{let t;switch(e){case 192:return null;case 193:return Y?(t=V(),t>0?Y[1].slice(Y.position1,Y.position1+=t):Y[0].slice(Y.position0,Y.position0-=t)):nr;case 194:return!1;case 195:return!0;case 196:if(t=p[u++],t===void 0)throw new Error("Unexpected end of buffer");return _t(t);case 197:return t=A.getUint16(u),u+=2,_t(t);case 198:return t=A.getUint32(u),u+=4,_t(t);case 199:return ye(p[u++]);case 200:return t=A.getUint16(u),u+=2,ye(t);case 201:return t=A.getUint32(u),u+=4,ye(t);case 202:if(t=A.getFloat32(u),Z.useFloat32>2){let n=Ft[(p[u]&127)<<1|p[u+1]>>7];return u+=4,(n*t+(t>0?.5:-.5)>>0)/n}return u+=4,t;case 203:return t=A.getFloat64(u),u+=8,t;case 204:return p[u++];case 205:return t=A.getUint16(u),u+=2,t;case 206:return t=A.getUint32(u),u+=4,t;case 207:return Z.int64AsNumber?(t=A.getUint32(u)*4294967296,t+=A.getUint32(u+4)):t=A.getBigUint64(u),u+=8,t;case 208:return A.getInt8(u++);case 209:return t=A.getInt16(u),u+=2,t;case 210:return t=A.getInt32(u),u+=4,t;case 211:return Z.int64AsNumber?(t=A.getInt32(u)*4294967296,t+=A.getUint32(u+4)):t=A.getBigInt64(u),u+=8,t;case 212:if(t=p[u++],t==114)return gn(p[u++]&63);{let n=te[t];if(n)return n.read?(u++,n.read(V())):n.noBuffer?(u++,n()):n(p.subarray(u,++u));throw new Error("Unknown extension "+t)}case 213:return t=p[u],t==114?(u++,gn(p[u++]&63,p[u++])):ye(2);case 214:return ye(4);case 215:return ye(8);case 216:return ye(16);case 217:return t=p[u++],ae>=u?he.slice(u-ne,(u+=t)-ne):_i(t);case 218:return t=A.getUint16(u),u+=2,ae>=u?he.slice(u-ne,(u+=t)-ne):mi(t);case 219:return t=A.getUint32(u),u+=4,ae>=u?he.slice(u-ne,(u+=t)-ne):yi(t);case 220:return t=A.getUint16(u),u+=2,hn(t);case 221:return t=A.getUint32(u),u+=4,hn(t);case 222:return t=A.getUint16(u),u+=2,_n(t);case 223:return t=A.getUint32(u),u+=4,_n(t);default:if(e>=224)return e-256;if(e===void 0){let n=new Error("Unexpected end of MessagePack data");throw n.incomplete=!0,n}throw new Error("Unknown MessagePack token "+e)}}}const hi=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Bt(e,t){function n(){if(n.count++>rr){let i=e.read=new Function("r","return function(){return {"+e.map(a=>a==="__proto__"?"__proto_:r()":hi.test(a)?a+":r()":"["+JSON.stringify(a)+"]:r()").join(",")+"}}")(V);return e.highByte===0&&(e.read=dn(t,e.read)),i()}let r={};for(let i=0,a=e.length;i<a;i++){let s=e[i];s==="__proto__"&&(s="__proto_"),r[s]=V()}return r}return n.count=0,e.highByte===0?dn(t,n):n}const dn=(e,t)=>function(){let n=p[u++];if(n===0)return t();let r=e<32?-(e+(n<<5)):e+(n<<5),i=R[r]||ir()[r];if(!i)throw new Error("Record id is not defined for "+r);return i.read||(i.read=Bt(i,e)),i.read()};function ir(){let e=lr(()=>(p=null,Z.getStructures()));return R=Z._mergeStructures(e,R)}var St=Ue,_i=Ue,mi=Ue,yi=Ue;function Ue(e){let t;if(e<16&&(t=qt(e)))return t;if(e>64&&Et)return Et.decode(p.subarray(u,u+=e));const n=u+e,r=[];for(t="";u<n;){const i=p[u++];if((i&128)===0)r.push(i);else if((i&224)===192){const a=p[u++]&63;r.push((i&31)<<6|a)}else if((i&240)===224){const a=p[u++]&63,s=p[u++]&63;r.push((i&31)<<12|a<<6|s)}else if((i&248)===240){const a=p[u++]&63,s=p[u++]&63,l=p[u++]&63;let d=(i&7)<<18|a<<12|s<<6|l;d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|d&1023),r.push(d)}else r.push(i);r.length>=4096&&(t+=G.apply(String,r),r.length=0)}return r.length>0&&(t+=G.apply(String,r)),t}function hn(e){let t=new Array(e);for(let n=0;n<e;n++)t[n]=V();return t}function _n(e){if(Z.mapsAsObjects){let t={};for(let n=0;n<e;n++){let r=or();r==="__proto__"&&(r="__proto_"),t[r]=V()}return t}else{let t=new Map;for(let n=0;n<e;n++)t.set(V(),V());return t}}var G=String.fromCharCode;function ar(e){let t=u,n=new Array(e);for(let r=0;r<e;r++){const i=p[u++];if((i&128)>0){u=t;return}n[r]=i}return G.apply(String,n)}function qt(e){if(e<4)if(e<2){if(e===0)return"";{let t=p[u++];if((t&128)>1){u-=1;return}return G(t)}}else{let t=p[u++],n=p[u++];if((t&128)>0||(n&128)>0){u-=2;return}if(e<3)return G(t,n);let r=p[u++];if((r&128)>0){u-=3;return}return G(t,n,r)}else{let t=p[u++],n=p[u++],r=p[u++],i=p[u++];if((t&128)>0||(n&128)>0||(r&128)>0||(i&128)>0){u-=4;return}if(e<6){if(e===4)return G(t,n,r,i);{let a=p[u++];if((a&128)>0){u-=5;return}return G(t,n,r,i,a)}}else if(e<8){let a=p[u++],s=p[u++];if((a&128)>0||(s&128)>0){u-=6;return}if(e<7)return G(t,n,r,i,a,s);let l=p[u++];if((l&128)>0){u-=7;return}return G(t,n,r,i,a,s,l)}else{let a=p[u++],s=p[u++],l=p[u++],d=p[u++];if((a&128)>0||(s&128)>0||(l&128)>0||(d&128)>0){u-=8;return}if(e<10){if(e===8)return G(t,n,r,i,a,s,l,d);{let c=p[u++];if((c&128)>0){u-=9;return}return G(t,n,r,i,a,s,l,d,c)}}else if(e<12){let c=p[u++],o=p[u++];if((c&128)>0||(o&128)>0){u-=10;return}if(e<11)return G(t,n,r,i,a,s,l,d,c,o);let x=p[u++];if((x&128)>0){u-=11;return}return G(t,n,r,i,a,s,l,d,c,o,x)}else{let c=p[u++],o=p[u++],x=p[u++],b=p[u++];if((c&128)>0||(o&128)>0||(x&128)>0||(b&128)>0){u-=12;return}if(e<14){if(e===12)return G(t,n,r,i,a,s,l,d,c,o,x,b);{let v=p[u++];if((v&128)>0){u-=13;return}return G(t,n,r,i,a,s,l,d,c,o,x,b,v)}}else{let v=p[u++],E=p[u++];if((v&128)>0||(E&128)>0){u-=14;return}if(e<15)return G(t,n,r,i,a,s,l,d,c,o,x,b,v,E);let U=p[u++];if((U&128)>0){u-=15;return}return G(t,n,r,i,a,s,l,d,c,o,x,b,v,E,U)}}}}}function mn(){let e=p[u++],t;if(e<192)t=e-160;else switch(e){case 217:t=p[u++];break;case 218:t=A.getUint16(u),u+=2;break;case 219:t=A.getUint32(u),u+=4;break;default:throw new Error("Expected string")}return Ue(t)}function _t(e){return Z.copyBuffers?Uint8Array.prototype.slice.call(p,u,u+=e):p.subarray(u,u+=e)}function ye(e){let t=p[u++];if(te[t])return te[t](p.subarray(u,u+=e));throw new Error("Unknown extension type "+t)}var yn=new Array(4096);function or(){let e=p[u++];if(e>=160&&e<192){if(e=e-160,ae>=u)return he.slice(u-ne,(u+=e)-ne);if(!(ae==0&&ue<180))return St(e)}else return u--,V();let t=(e<<5^(e>1?A.getUint16(u):e>0?p[u]:0))&4095,n=yn[t],r=u,i=u+e-3,a,s=0;if(n&&n.bytes==e){for(;r<i;){if(a=A.getUint32(r),a!=n[s++]){r=1879048192;break}r+=4}for(i+=3;r<i;)if(a=p[r++],a!=n[s++]){r=1879048192;break}if(r===i)return u=r,n.string;i-=3,r=u}for(n=[],yn[t]=n,n.bytes=e;r<i;)a=A.getUint32(r),n.push(a),r+=4;for(i+=3;r<i;)a=p[r++],n.push(a);let l=e<16?qt(e):ar(e);return l!=null?n.string=l:n.string=St(e)}const gn=(e,t)=>{var n=V();let r=e;t!==void 0&&(e=e<32?-((t<<5)+e):(t<<5)+e,n.highByte=t);let i=R[e];return i&&i.isShared&&((R.restoreStructures||(R.restoreStructures=[]))[e]=i),R[e]=n,n.read=Bt(n,r),n.read()};te[0]=()=>{};te[0].noBuffer=!0;te[101]=()=>{let e=V();return(globalThis[e[0]]||Error)(e[1])};te[105]=e=>{let t=A.getUint32(u-4);ce||(ce=new Map);let n=p[u],r;n>=144&&n<160||n==220||n==221?r=[]:r={};let i={target:r};ce.set(t,i);let a=V();return i.used?Object.assign(r,a):(i.target=a,a)};te[112]=e=>{let t=A.getUint32(u-4),n=ce.get(t);return n.used=!0,n.target};te[115]=()=>new Set(V());const sr=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");te[116]=e=>{let t=e[0],n=sr[t];if(!n)throw new Error("Could not find typed array for code "+t);return new globalThis[n](Uint8Array.prototype.slice.call(e,1).buffer)};te[120]=()=>{let e=V();return new RegExp(e[0],e[1])};const gi=[];te[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],n=u;return u+=t-e.length,Y=gi,Y=[mn(),mn()],Y.position0=0,Y.position1=0,Y.postBundlePosition=u,u=n,V()};te[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function lr(e){let t=ue,n=u,r=ne,i=ae,a=he,s=ce,l=Y,d=new Uint8Array(p.slice(0,ue)),c=R,o=R.slice(0,R.length),x=Z,b=Se,v=e();return ue=t,u=n,ne=r,ae=i,he=a,ce=s,Y=l,p=d,Se=b,R=c,R.splice(0,R.length,...o),Z=x,A=new DataView(p.buffer,p.byteOffset,p.byteLength),v}function Tt(){p=null,ce=null,R=null}const Ft=new Array(147);for(let e=0;e<256;e++)Ft[e]=+("1e"+Math.floor(45.15-e*.30103));var at=new Ie({useRecords:!1});const xn=at.unpack;at.unpackMultiple;at.unpack;let xi=new Float32Array(1);new Uint8Array(xi.buffer,0,4);let He;try{He=new TextEncoder}catch{}let kt,ur;const ot=typeof Buffer<"u",Be=ot?function(e){return Buffer.allocUnsafeSlow(e)}:Uint8Array,cr=ot?Buffer:Uint8Array,vn=ot?4294967296:2144337920;let h,Ce,D,f=0,Q,H=null;const vi=61440,bi=/[\u0080-\uFFFF]/,xe=Symbol("record-id");class pi extends Ie{constructor(t){super(t),this.offset=0;let n,r,i,a,s=0,l=cr.prototype.utf8Write?function(m,k){return h.utf8Write(m,k,4294967295)}:He&&He.encodeInto?function(m,k){return He.encodeInto(m,h.subarray(k)).written}:!1,d=this;t||(t={});let c=t&&t.sequential,o=t.structures||t.saveStructures,x=t.maxSharedStructures;if(x==null&&(x=o?32:0),x>8160)throw new Error("Maximum maxSharedStructure is 8160");t.structuredClone&&t.moreTypes==null&&(t.moreTypes=!0);let b=t.maxOwnStructures;b==null&&(b=o?32:64),!this.structures&&t.useRecords!=!1&&(this.structures=[]);let v=x>32||b+x>64,E=x+64,U=x+b+64;if(U>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let O=[],I=0,B=0;this.pack=this.encode=function(m,k){if(h||(h=new Be(8192),D=new DataView(h.buffer,0,8192),f=0),Q=h.length-10,Q-f<2048?(h=new Be(h.length),D=new DataView(h.buffer,0,h.length),Q=h.length-10,f=0):f=f+7&2147483640,n=f,a=d.structuredClone?new Map:null,d.bundleStrings&&typeof m!="string"?(H=[],H.size=1/0):H=null,i=d.structures,i){i.uninitialized&&(i=d._mergeStructures(d.getStructures()));let y=i.sharedLength||0;if(y>x)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+i.sharedLength);if(!i.transitions){i.transitions=Object.create(null);for(let g=0;g<y;g++){let w=i[g];if(!w)continue;let N,C=i.transitions;for(let S=0,j=w.length;S<j;S++){let L=w[S];N=C[L],N||(N=C[L]=Object.create(null)),C=N}C[xe]=g+64}s=y}c||(i.nextId=y+64)}r&&(r=!1);try{if(P(m),H&&wn(n,P),d.offset=f,a&&a.idsToInsert){f+=a.idsToInsert.length*6,f>Q&&q(f),d.offset=f;let y=Ei(h.subarray(n,f),a.idsToInsert);return a=null,y}return k&Si?(h.start=n,h.end=f,h):h.subarray(n,f)}finally{if(i){B<10&&B++;let y=i.sharedLength||x;if(i.length>y&&(i.length=y),I>1e4)i.transitions=null,B=0,I=0,O.length>0&&(O=[]);else if(O.length>0&&!c){for(let g=0,w=O.length;g<w;g++)O[g][xe]=0;O=[]}if(r&&d.saveStructures){let g=h.subarray(n,f);return d.saveStructures(i,s)===!1?(d._mergeStructures(d.getStructures()),d.pack(m)):(s=y,g)}}k&Ti&&(f=n)}};const P=m=>{f>Q&&(h=q(f));var k=typeof m,y;if(k==="string"){let g=m.length;if(H&&g>=4&&g<4096){if((H.size+=g)>vi){let S,j=(H[0]?H[0].length*3+H[1].length:0)+10;f+j>Q&&(h=q(f+j)),H.position?(h[f]=200,f+=3,h[f++]=98,S=f-n,f+=4,wn(n,P),D.setUint16(S+n-3,f-n-S)):(h[f++]=214,h[f++]=98,S=f-n,f+=4),H=["",""],H.size=0,H.position=S}let C=bi.test(m);H[C?0:1]+=m,h[f++]=193,P(C?-g:g);return}let w;g<32?w=1:g<256?w=2:g<65536?w=3:w=5;let N=g*3;if(f+N>Q&&(h=q(f+N)),g<64||!l){let C,S,j,L=f+w;for(C=0;C<g;C++)S=m.charCodeAt(C),S<128?h[L++]=S:S<2048?(h[L++]=S>>6|192,h[L++]=S&63|128):(S&64512)===55296&&((j=m.charCodeAt(C+1))&64512)===56320?(S=65536+((S&1023)<<10)+(j&1023),C++,h[L++]=S>>18|240,h[L++]=S>>12&63|128,h[L++]=S>>6&63|128,h[L++]=S&63|128):(h[L++]=S>>12|224,h[L++]=S>>6&63|128,h[L++]=S&63|128);y=L-f-w}else y=l(m,f+w);y<32?h[f++]=160|y:y<256?(w<2&&h.copyWithin(f+2,f+1,f+1+y),h[f++]=217,h[f++]=y):y<65536?(w<3&&h.copyWithin(f+3,f+2,f+2+y),h[f++]=218,h[f++]=y>>8,h[f++]=y&255):(w<5&&h.copyWithin(f+5,f+3,f+3+y),h[f++]=219,D.setUint32(f,y),f+=4),f+=y}else if(k==="number")if(m>>>0===m)m<64||m<128&&this.useRecords===!1?h[f++]=m:m<256?(h[f++]=204,h[f++]=m):m<65536?(h[f++]=205,h[f++]=m>>8,h[f++]=m&255):(h[f++]=206,D.setUint32(f,m),f+=4);else if(m>>0===m)m>=-32?h[f++]=256+m:m>=-128?(h[f++]=208,h[f++]=m+256):m>=-32768?(h[f++]=209,D.setInt16(f,m),f+=2):(h[f++]=210,D.setInt32(f,m),f+=4);else{let g;if((g=this.useFloat32)>0&&m<4294967296&&m>=-2147483648){h[f++]=202,D.setFloat32(f,m);let w;if(g<4||(w=m*Ft[(h[f]&127)<<1|h[f+1]>>7])>>0===w){f+=4;return}else f--}h[f++]=203,D.setFloat64(f,m),f+=8}else if(k==="object")if(!m)h[f++]=192;else{if(a){let w=a.get(m);if(w){if(!w.id){let N=a.idsToInsert||(a.idsToInsert=[]);w.id=N.push(w)}h[f++]=214,h[f++]=112,D.setUint32(f,w.id),f+=4;return}else a.set(m,{offset:f-n})}let g=m.constructor;if(g===Object)X(m,!0);else if(g===Array){y=m.length,y<16?h[f++]=144|y:y<65536?(h[f++]=220,h[f++]=y>>8,h[f++]=y&255):(h[f++]=221,D.setUint32(f,y),f+=4);for(let w=0;w<y;w++)P(m[w])}else if(g===Map){y=m.size,y<16?h[f++]=128|y:y<65536?(h[f++]=222,h[f++]=y>>8,h[f++]=y&255):(h[f++]=223,D.setUint32(f,y),f+=4);for(let[w,N]of m)P(w),P(N)}else{for(let w=0,N=kt.length;w<N;w++){let C=ur[w];if(m instanceof C){let S=kt[w];if(S.write){S.type&&(h[f++]=212,h[f++]=S.type,h[f++]=0),P(S.write.call(this,m));return}let j=h,L=D,se=f;h=null;let me;try{me=S.pack.call(this,m,ke=>(h=j,j=null,f+=ke,f>Q&&q(f),{target:h,targetView:D,position:f-ke}),P)}finally{j&&(h=j,D=L,f=se,Q=h.length-10)}me&&(me.length+f>Q&&q(me.length+f),f=wi(me,h,f,S.type));return}}X(m,!m.hasOwnProperty)}}else if(k==="boolean")h[f++]=m?195:194;else if(k==="bigint"){if(m<BigInt(1)<<BigInt(63)&&m>=-(BigInt(1)<<BigInt(63)))h[f++]=211,D.setBigInt64(f,m);else if(m<BigInt(1)<<BigInt(64)&&m>0)h[f++]=207,D.setBigUint64(f,m);else if(this.largeBigIntToFloat)h[f++]=203,D.setFloat64(f,Number(m));else throw new RangeError(m+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");f+=8}else if(k==="undefined")this.encodeUndefinedAsNil?h[f++]=192:(h[f++]=212,h[f++]=0,h[f++]=0);else if(k==="function")P(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+k)},X=this.useRecords===!1?this.variableMapSize?m=>{let k=Object.keys(m),y=k.length;y<16?h[f++]=128|y:y<65536?(h[f++]=222,h[f++]=y>>8,h[f++]=y&255):(h[f++]=223,D.setUint32(f,y),f+=4);let g;for(let w=0;w<y;w++)P(g=k[w]),P(m[g])}:(m,k)=>{h[f++]=222;let y=f-n;f+=2;let g=0;for(let w in m)(k||m.hasOwnProperty(w))&&(P(w),P(m[w]),g++);h[y+++n]=g>>8,h[y+n]=g&255}:t.progressiveRecords&&!v?(m,k)=>{let y,g=i.transitions||(i.transitions=Object.create(null)),w=f++-n,N;for(let C in m)if(k||m.hasOwnProperty(C)){if(y=g[C],y)g=y;else{let S=Object.keys(m),j=g;g=i.transitions;let L=0;for(let se=0,me=S.length;se<me;se++){let ke=S[se];y=g[ke],y||(y=g[ke]=Object.create(null),L++),g=y}w+n+1==f?(f--,z(g,S,L)):ie(g,S,w,L),N=!0,g=j[C]}P(m[C])}if(!N){let C=g[xe];C?h[w+n]=C:ie(g,Object.keys(m),w,0)}}:(m,k)=>{let y,g=i.transitions||(i.transitions=Object.create(null)),w=0;for(let C in m)(k||m.hasOwnProperty(C))&&(y=g[C],y||(y=g[C]=Object.create(null),w++),g=y);let N=g[xe];N?N>=96&&v?(h[f++]=((N-=96)&31)+96,h[f++]=N>>5):h[f++]=N:z(g,g.__keys__||Object.keys(m),w);for(let C in m)(k||m.hasOwnProperty(C))&&P(m[C])},q=m=>{let k;if(m>16777216){if(m-n>vn)throw new Error("Packed buffer would be larger than maximum buffer size");k=Math.min(vn,Math.round(Math.max((m-n)*(m>67108864?1.25:2),4194304)/4096)*4096)}else k=(Math.max(m-n<<2,h.length-1)>>12)+1<<12;let y=new Be(k);return D=new DataView(y.buffer,0,k),m=Math.min(m,h.length),h.copy?h.copy(y,0,n,m):y.set(h.slice(n,m)),f-=n,n=0,Q=y.length-10,h=y},z=(m,k,y)=>{let g=i.nextId;g||(g=64),g<E&&this.shouldShareStructure&&!this.shouldShareStructure(k)?(g=i.nextOwnId,g<U||(g=E),i.nextOwnId=g+1):(g>=U&&(g=E),i.nextId=g+1);let w=k.highByte=g>=96&&v?g-96>>5:-1;m[xe]=g,m.__keys__=k,i[g-64]=k,g<E?(k.isShared=!0,i.sharedLength=g-63,r=!0,w>=0?(h[f++]=(g&31)+96,h[f++]=w):h[f++]=g):(w>=0?(h[f++]=213,h[f++]=114,h[f++]=(g&31)+96,h[f++]=w):(h[f++]=212,h[f++]=114,h[f++]=g),y&&(I+=B*y),O.length>=b&&(O.shift()[xe]=0),O.push(m),P(k))},ie=(m,k,y,g)=>{let w=h,N=f,C=Q,S=n;h=Ce,f=0,n=0,h||(Ce=h=new Be(8192)),Q=h.length-10,z(m,k,g),Ce=h;let j=f;if(h=w,f=N,Q=C,n=S,j>1){let L=f+j-1;L>Q&&q(L);let se=y+n;h.copyWithin(se+j,se+1,f),h.set(Ce.slice(0,j),se),f=L}else h[y+n]=Ce[0]}}useBuffer(t){h=t,D=new DataView(h.buffer,h.byteOffset,h.byteLength),f=0}clearSharedData(){this.structures&&(this.structures=[])}}ur=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,tr];kt=[{pack(e,t,n){let r=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&r>=0&&r<4294967296){let{target:i,targetView:a,position:s}=t(6);i[s++]=214,i[s++]=255,a.setUint32(s,r)}else if(r>0&&r<4294967296){let{target:i,targetView:a,position:s}=t(10);i[s++]=215,i[s++]=255,a.setUint32(s,e.getMilliseconds()*4e6+(r/1e3/4294967296>>0)),a.setUint32(s+4,r)}else if(isNaN(r)){if(this.onInvalidDate)return t(0),n(this.onInvalidDate());let{target:i,targetView:a,position:s}=t(3);i[s++]=212,i[s++]=255,i[s++]=255}else{let{target:i,targetView:a,position:s}=t(15);i[s++]=199,i[s++]=12,i[s++]=255,a.setUint32(s,e.getMilliseconds()*1e6),a.setBigInt64(s+4,BigInt(Math.floor(r)))}}},{pack(e,t,n){let r=Array.from(e),{target:i,position:a}=t(this.moreTypes?3:0);this.moreTypes&&(i[a++]=212,i[a++]=115,i[a++]=0),n(r)}},{pack(e,t,n){let{target:r,position:i}=t(this.moreTypes?3:0);this.moreTypes&&(r[i++]=212,r[i++]=101,r[i++]=0),n([e.name,e.message])}},{pack(e,t,n){let{target:r,position:i}=t(this.moreTypes?3:0);this.moreTypes&&(r[i++]=212,r[i++]=120,r[i++]=0),n([e.source,e.flags])}},{pack(e,t){this.moreTypes?bn(e,16,t):pn(ot?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let n=e.constructor;n!==cr&&this.moreTypes?bn(e,sr.indexOf(n.name),t):pn(e,t)}},{pack(e,t){let{target:n,position:r}=t(1);n[r]=193}}];function bn(e,t,n,r){let i=e.byteLength;if(i+1<256){var{target:a,position:s}=n(4+i);a[s++]=199,a[s++]=i+1}else if(i+1<65536){var{target:a,position:s}=n(5+i);a[s++]=200,a[s++]=i+1>>8,a[s++]=i+1&255}else{var{target:a,position:s,targetView:l}=n(7+i);a[s++]=201,l.setUint32(s,i+1),s+=4}a[s++]=116,a[s++]=t,a.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),s)}function pn(e,t){let n=e.byteLength;var r,i;if(n<256){var{target:r,position:i}=t(n+2);r[i++]=196,r[i++]=n}else if(n<65536){var{target:r,position:i}=t(n+3);r[i++]=197,r[i++]=n>>8,r[i++]=n&255}else{var{target:r,position:i,targetView:a}=t(n+5);r[i++]=198,a.setUint32(i,n),i+=4}r.set(e,i)}function wi(e,t,n,r){let i=e.length;switch(i){case 1:t[n++]=212;break;case 2:t[n++]=213;break;case 4:t[n++]=214;break;case 8:t[n++]=215;break;case 16:t[n++]=216;break;default:i<256?(t[n++]=199,t[n++]=i):i<65536?(t[n++]=200,t[n++]=i>>8,t[n++]=i&255):(t[n++]=201,t[n++]=i>>24,t[n++]=i>>16&255,t[n++]=i>>8&255,t[n++]=i&255)}return t[n++]=r,t.set(e,n),n+=i,n}function Ei(e,t){let n,r=t.length*6,i=e.length-r;for(t.sort((a,s)=>a.offset>s.offset?1:-1);n=t.pop();){let a=n.offset,s=n.id;e.copyWithin(a+r,a,i),r-=6;let l=a+r;e[l++]=214,e[l++]=105,e[l++]=s>>24,e[l++]=s>>16&255,e[l++]=s>>8&255,e[l++]=s&255,i=a}return e}function wn(e,t){if(H.length>0){D.setUint32(H.position+e,f-H.position-e);let n=H;H=null,t(n[0]),t(n[1])}}let fr=new pi({useRecords:!1});const En=fr.pack;fr.pack;const Si=512,Ti=1024;var Sn;const mt=(Sn=window.acquireVsCodeApi)==null?void 0:Sn.call(window),ve=new Set;var et,dr,tt,hr;class ki{constructor(){st(this,et);st(this,tt);this.query=(t,n,r)=>mt?lt(this,et,dr).call(this,{query:t,params:n,mode:r}):lt(this,tt,hr).call(this,{query:t,params:n,mode:r}),this.hasTable=async t=>(await this.query("SELECT name FROM sqlite_master WHERE type='table' AND name=?",[t],"r")).length>0,this.hasTableAutoincrement=async t=>{var n;return await this.hasTable("sqlite_sequence")&&!!((n=(await this.query("SELECT COUNT(*) AS count FROM sqlite_sequence WHERE name = ?",[t],"r"))[0])!=null&&n.count)},this.listUniqueConstraints=async t=>{const n=[];for(const r of await this.getTableInfo(t))r.pk&&n.push({primary:!0,columns:[r.name]});for(const r of await this.query(`PRAGMA index_list(${M(t)})`,[],"r")){if(r.partial||!r.unique)continue;const i=await this.query(`PRAGMA index_info(${M(r.name)})`,[],"r");n.push({primary:r.origin==="pk",columns:i.map(({name:a})=>a)})}return n},this.getTableInfo=async t=>this.query(`PRAGMA table_info(${M(t)})`,[],"r"),this.getTableList=async()=>this.query("PRAGMA table_list",[],"r")}}et=new WeakSet,dr=async function(t){if(mt===void 0)return;const n={};return ve.add(n),document.body.classList.add("querying"),new Promise((r,i)=>{const a=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER);mt.postMessage({requestId:a,body:En(t)});const s=({data:l})=>{var d;if(l.requestId===a){if(window.removeEventListener("message",s),console.log(l),"err"in l){(d=this.addErrorMessage)==null||d.call(this,l.err),i(new Error(l.err));return}r(xn(l.body))}};window.addEventListener("message",s)}).finally(()=>{ve.delete(n),ve.size===0&&document.body.classList.remove("querying")})},tt=new WeakSet,hr=async function(t){var r,i;const n={};ve.add(n),document.body.classList.add("querying");try{let a;try{a=await fetch("/query",{method:"POST",body:En(t),headers:{"Content-Type":"application/octet-stream"}})}catch(s){throw(r=this.addErrorMessage)==null||r.call(this,"message"in s?s.message:""+s),s}if(!a.ok){const s=await a.text();throw(i=this.addErrorMessage)==null||i.call(this,s),new Error(s)}return xn(new Uint8Array(await a.arrayBuffer()))}finally{ve.delete(n),ve.size===0&&document.body.classList.remove("querying")}};const M=e=>{if(e.includes("\0"))throw new Error("Invalid identifier");return e.includes('"')||/[^A-Za-z0-9_\$]/.test(e)?`"${e.replaceAll('"','""')}"`:e},_r=e=>typeof e=="string"?`'${e.replaceAll("'","''")}'`:e+"",mr=(e,t=8)=>Array.from(e.slice(0,t),n=>n.toString(16).padStart(2,"0")).join("")+(e.length>t?"...":""),Vt=e=>e==="number"?"green":e==="string"?"rgb(138, 4, 4)":"rgb(4, 63, 138)",Ci=({records:e,rowStart:t,tableInfo:n,tableName:r,autoIncrement:i})=>{var a;return n===null&&(n=Object.keys((a=e[0])!=null?a:{}).map(s=>({name:s,notnull:0,pk:0,type:"",cid:0,dflt_value:0}))),_("table",{className:"viewer",children:[_("thead",{children:_("tr",{children:[_("th",{}),n.map(({name:s,notnull:l,pk:d,type:c})=>_("th",{className:r!==null?"clickable":"",onClick:()=>{r!==null&&jt(r,s)},children:_("code",{children:[s,_("span",{className:"type",children:(c?" "+c:"")+(d?i?" PRIMARY KEY AUTOINCREMENT":" PRIMARY KEY":"")+(l?" NOT NULL":"")})]})}))]})}),_("tbody",{children:e.map((s,l)=>_("tr",{children:[_("td",{className:r!==null?"clickable":"",onClick:d=>{r!==null&&Dt(r,s,d.currentTarget.parentElement).catch(console.error)},children:t+l+1}),n.map(({name:d})=>{const c=s[d];return _("td",{className:r!==null?"clickable":"",onClick:o=>{r!==null&&Lt(r,d,s,o.currentTarget).catch(console.error)},children:_("pre",{style:{color:Vt(typeof c)},children:c instanceof Uint8Array?`x'${mr(c)}'`:JSON.stringify(c)})})})]}))})]})},Oi=()=>{const e=Ye();let t=0;const n=200,r=Date.now();return Ne(()=>{if(e.current===null)return;let i=!1;const a=()=>{i||(document.body.classList.contains("querying")&&(e.current.style.left=`${t}px`,t=(Date.now()-r)%(window.innerWidth+n)-n),requestAnimationFrame(a))};return a(),()=>{i=!0}},[]),_("div",{className:"progressbar",ref:e,style:{display:"inline-block",userSelect:"none",pointerEvents:"none",position:"absolute",zIndex:100,width:n+"px",height:"5px",top:0,background:"var(--button-primary-background)"}})},Ai=e=>{var k;const[t,n]=J(e.tableList),[r,i]=J("SELECT"),[a,s]=J("analysis_limit"),[l,d]=J((k=t[0])==null?void 0:k.name),[c,o]=J(""),[x,b]=J(""),[v,E]=yt((y,g)=>Math.max(1,g),1e3),[U,O]=J(0),I=Math.ceil(U/v),[B,P]=J({}),[X,q]=yt((y,g)=>{const w=Math.max(1,Math.min(I,g));return g!==w&&P({}),w},0),[z,ie]=J(null);e.sql.addErrorMessage=y=>b(g=>g+y+`
`);const m=async()=>{var w;if(l===void 0)return;const{wr:y,type:g}=(w=t.find(({name:N})=>N===l))!=null?w:{};if(!(y===void 0||g===void 0))if(r==="SELECT"){const N=await e.sql.query(`SELECT ${y||g!=="table"?"":"rowid AS rowid, "}* FROM ${M(l)} ${c} LIMIT ? OFFSET ?`,[v,(X-1)*v],"r"),C=(await e.sql.query(`SELECT COUNT(*) as count FROM ${M(l)} ${c}`,[],"r"))[0].count;if(typeof C!="number")throw new Error(C+"");O(C),ie({tableName:l,autoIncrement:l===null?!1:await e.sql.hasTableAutoincrement(l),records:N,rowStart:(X-1)*v,tableInfo:await e.sql.getTableInfo(l)})}else ie({tableName:null,autoIncrement:!1,records:await e.sql.query(`${r} ${a}`,[],"r"),rowStart:0,tableInfo:null})};return Ne(()=>{q(X)},[U,v]),Ne(()=>{m().catch(console.error)},[r,a,l,c,t,X,v]),_(W,{children:[_(Oi,{}),l!==void 0&&_("h2",{children:[_(ge,{value:r,onChange:i,options:{SELECT:{},PRAGMA:{}},className:"primary"}),r==="SELECT"&&_(W,{children:[" * FROM"," ",_(ge,{value:l,onChange:d,options:Object.fromEntries(t.map(({name:y})=>[y,{}])),className:"primary"})," ",_("input",{value:c,onBlur:y=>{o(y.currentTarget.value)},placeholder:"WHERE <column> = <value> ORDER BY <column> ...",autocomplete:"off",style:{width:"1000px"}})]}),r==="PRAGMA"&&_(ge,{value:a,onChange:s,options:Object.fromEntries(e.pragmaList.map(y=>[y,{}]))})]}),_("div",{style:{marginLeft:"10px",marginRight:"10px",padding:0,background:"white",height:"50vh",overflowY:"scroll"},children:z&&_(Ci,{...z})}),_("div",{style:{marginBottom:"30px",paddingTop:"3px"},className:"primary",children:[_("span",{children:[_("span",{style:{cursor:"pointer",paddingLeft:"8px",paddingRight:"8px",userSelect:"none"},onClick:()=>q(X-1),children:"\u2039"}),_("input",{value:X,style:{textAlign:"center",width:"50px",background:"white",color:"black"},onChange:y=>q(+y.currentTarget.value)})," / ",I," ",_("span",{style:{cursor:"pointer",paddingLeft:"4px",paddingRight:"8px",userSelect:"none"},onClick:()=>q(X+1),children:"\u203A"})]}),_("span",{style:{marginLeft:"40px"},children:[_("input",{value:v,style:{textAlign:"center",width:"50px",background:"white",color:"black"},onBlur:y=>E(+y.currentTarget.value)})," records"]})]}),x&&_("p",{style:{background:"rgb(14, 72, 117)",color:"white",padding:"10px"},children:[_("pre",{children:x}),_("input",{type:"button",value:"Close",className:"primary",style:{marginTop:"10px"},onClick:()=>b("")})]}),_(fi,{tableName:r==="SELECT"?l:void 0,tableList:t,onWrite:y=>{const g=y.refreshTableList||y.selectTable!==void 0;g||m().catch(console.error),e.sql.getTableList().then(w=>{var C,S;if(di(w,t)){g&&m().catch(console.error);return}const N=(C=y.selectTable)!=null?C:l;w.some(j=>j.name===N)?d(N):d((S=w[0])==null?void 0:S.name),n(w)}).catch(console.error)},sql:e.sql})]})};(async()=>{const e=new ki;e.addErrorMessage=t=>document.write(t),wr(_(Ai,{tableList:await e.getTableList(),pragmaList:(await e.query("PRAGMA pragma_list",[],"r")).map(({name:t})=>t),sql:e}),document.body)})().catch(console.error);
